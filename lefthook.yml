pre-commit:
  parallel: false
  commands:
    format:
      glob: "*.dart"
      run: |
        files="{staged_files}"
        [ -z "$files" ] && exit 0
        fvm dart format --set-exit-if-changed $files
    analyze:
      glob: "*.dart"
      run: |
        files="{staged_files}"
        [ -z "$files" ] && exit 0
        fvm flutter analyze $files
    test:
      glob: "test/**/*.dart integration_test/**/*.dart"
      run: |
        files="{staged_files}"
        [ -z "$files" ] && exit 0
        fvm flutter test -j 1 $files

commit-msg:
  commands:
    commitlint:
      run: npx --no-install commitlint --edit {1}
